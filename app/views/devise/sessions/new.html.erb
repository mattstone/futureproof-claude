<%= render 'shared/header' %>

<div class="auth-page">
  <div class="auth-container">
    <div class="auth-card">
      <div class="auth-header">
        <h1 class="auth-title">Sign In</h1>
        <p class="auth-subtitle">Welcome back to your Equity Preservation Mortgage¬Æ account</p>
      </div>

      <div class="auth-form">
        <%= form_for(resource, as: resource_name, url: session_path(resource_name), local: true, html: { class: "auth-form-inner" }) do |f| %>

          <div class="form-group">
            <%= f.label :email, class: "form-label" %>
            <%= f.email_field :email, 
                class: "form-input", 
                placeholder: "Enter your email address",
                autofocus: true,
                autocomplete: "email" %>
          </div>

          <div class="form-group">
            <%= f.label :password, class: "form-label" %>
            <%= f.password_field :password, 
                class: "form-input", 
                placeholder: "Enter your password",
                autocomplete: "current-password" %>
          </div>

          <% if devise_mapping.rememberable? %>
            <div class="form-group checkbox-group">
              <%= f.check_box :remember_me, class: "form-checkbox" %>
              <%= f.label :remember_me, "Remember me", class: "checkbox-label" %>
            </div>
          <% end %>

          <div class="form-actions">
            <%= f.submit "Sign In", class: "site-btn site-btn-primary site-btn-lg auth-submit-btn" %>
          </div>
        <% end %>

        <!-- SSO Login Options -->
        <% if User.available_omniauth_providers.any? %>
          <div class="auth-divider">
            <span class="divider-text">Or sign in with</span>
          </div>

          <div class="sso-buttons">
            <% User.available_omniauth_providers.each do |provider| %>
              <%= link_to "/users/auth/#{provider}",
                  method: :post,
                  class: "site-btn site-btn-secondary sso-btn" do %>
                <% case provider %>
                <% when :entra_id %>
                  üè¢ Sign in with Microsoft
                <% when :google_oauth2 %>
                  üîç Sign in with Google
                <% when :saml %>
                  üîê Sign in with SSO
                <% end %>
              <% end %>
            <% end %>
          </div>
        <% end %>

        <!-- Toggle Links -->
        <div class="auth-toggle">
          <p class="toggle-text">Don't have an account? 
            <%= link_to "Create Account", new_registration_path(resource_name), class: "toggle-link" %>
          </p>
        </div>

        <!-- Additional Links -->
        <div class="auth-links">
          <%= link_to "Forgot your password?", new_password_path(resource_name), class: "auth-link" %>
        </div>
      </div>

      <div class="auth-footer">
        <%= link_to "‚Üê Back to Home", root_path, class: "back-link" %>
      </div>
    </div>
  </div>
</div>

<%= render 'shared/footer' %>