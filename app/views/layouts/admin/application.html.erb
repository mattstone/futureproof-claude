<!DOCTYPE html>
<html data-theme="light" lang="en" class="admin-html">
  <head>
    <title>Admin - <%= content_for(:title) || "Futureproof" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%= stylesheet_link_tag "application", "admin", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="admin-body">
    <div class="admin-container">
      <!-- Admin Sidebar -->
      <aside class="admin-sidebar">
        <div class="admin-brand">
          <%= link_to admin_root_path, class: "admin-brand-link" do %>
            <%= image_tag "futureproof-logo.png", class: "admin-logo" %>
          <% end %>
        </div>
        
        <nav class="admin-nav">
          <%= link_to admin_dashboard_index_path, class: "admin-nav-link #{'active' if controller_name == 'dashboard'}" do %>
            <span>📊 Dashboard</span>
          <% end %>
          <%= link_to admin_applications_path, class: "admin-nav-link #{'active' if controller_name == 'applications'}" do %>
            <span>📋 Applications</span>
          <% end %>
          <%= link_to admin_contracts_path, class: "admin-nav-link #{'active' if controller_name == 'contracts'}" do %>
            <span>📄 Contracts</span>
          <% end %>
          <%= link_to admin_users_path, class: "admin-nav-link #{'active' if controller_name == 'users'}" do %>
            <span>👥 Users</span>
          <% end %>
          
          <% if current_user&.lender&.lender_type_futureproof? %>
            <%= link_to admin_calculators_path, class: "admin-nav-link #{'active' if controller_name == 'calculators'}" do %>
              <span>🧮 Calculator</span>
            <% end %>
            <%= link_to admin_terms_of_uses_path, class: "admin-nav-link #{'active' if controller_name == 'terms_of_uses'}" do %>
              <span>📄 Terms of Use</span>
            <% end %>
            <%= link_to admin_privacy_policies_path, class: "admin-nav-link #{'active' if controller_name == 'privacy_policies'}" do %>
              <span>🔒 Privacy Policies</span>
            <% end %>
            <%= link_to admin_terms_and_conditions_path, class: "admin-nav-link #{'active' if controller_name == 'terms_and_conditions'}" do %>
              <span>📋 Terms & Conditions</span>
            <% end %>
            <%= link_to admin_email_templates_path, class: "admin-nav-link #{'active' if controller_name == 'email_templates'}" do %>
              <span>📧 Email Templates</span>
            <% end %>
            <%= link_to admin_mortgages_path, class: "admin-nav-link #{'active' if controller_name == 'mortgages'}" do %>
              <span>🏠 Mortgages</span>
            <% end %>
            <%= link_to admin_lenders_path, class: "admin-nav-link #{'active' if controller_name == 'lenders'}" do %>
              <span>🏢 Lenders</span>
            <% end %>
            <%= link_to admin_wholesale_funders_path, class: "admin-nav-link #{'active' if controller_name == 'wholesale_funders'}" do %>
              <span>💰 Wholesale Funders</span>
            <% end %>
          <% end %>
        </nav>
        
        <div class="admin-user-info">
          <div class="admin-current-user">
            <strong><%= current_user.display_name %></strong>
            <small><%= current_user.email %></small>
          </div>
          <div class="admin-actions">
            <%= link_to "View Site", root_path, class: "admin-link", target: "_blank" %>
            <%= link_to "🕹️ Arcade", arcade_path, class: "admin-link", target: "_blank" %>
            <%= render 'shared/sign_out_link', css_class: "admin-link" %>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="admin-main">
        <div class="admin-header">
          <h1><%= yield(:page_title) || "Back Office" %></h1>
        </div>

        <div class="admin-content">
          <% if notice %>
            <div class="alert alert-success"><%= notice %></div>
          <% end %>
          <% if alert %>
            <div class="alert alert-danger"><%= alert %></div>
          <% end %>
          
          <%= yield %>
        </div>
      </main>
    </div>
  </body>
</html>