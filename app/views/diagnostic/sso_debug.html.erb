<h1>SSO Debug Information</h1>

<div style="font-family: monospace; background: #f5f5f5; padding: 20px; margin: 20px 0;">
  <h3>Environment Variables:</h3>
  <p><strong>AZURE_CLIENT_ID (env var) present:</strong> <%= @azure_client_id_present %></p>
  <p><strong>AZURE_CLIENT_SECRET (env var) present:</strong> <%= @azure_client_secret_present %></p>

  <% if defined?(@azure_client_id_from_credentials) %>
  <h3>Rails Credentials (Legacy Azure - Removed):</h3>
  <p><strong>AZURE_CLIENT_ID (credentials) present:</strong> <%= @azure_client_id_from_credentials %></p>
  <p><strong>AZURE_CLIENT_SECRET (credentials) present:</strong> <%= @azure_client_secret_from_credentials %></p>
  <% end %>

  <% if defined?(@saml_sso_url_present) %>
  <h3>SAML Configuration:</h3>
  <p><strong>MICROSOFT_SAML_SSO_URL present:</strong> <%= @saml_sso_url_present %></p>
  <p><strong>MICROSOFT_SAML_CERT present:</strong> <%= @saml_cert_present %></p>
  <% end %>

  <h3>Provider Detection:</h3>
  <p><strong>Available providers:</strong> <%= @available_providers.inspect %></p>

  <h3>Domain Detection:</h3>
  <p><strong>Current host:</strong> <%= @current_host %></p>
  <p><strong>Is admin domain:</strong> <%= @tenant_detection %></p>

  <h3>Omniauth Configuration:</h3>
  <p><strong>Rails environment:</strong> <%= Rails.env %></p>

  <% if @available_providers.any? %>
    <h3>SSO Buttons Would Show:</h3>
    <% @available_providers.each do |provider| %>
      <p>‚úÖ <%= provider %> -
        <% case provider %>
        <% when :entra_id %>
          üè¢ Sign in with Microsoft
        <% when :google_oauth2 %>
          üîç Sign in with Google
        <% when :saml %>
          üîê Sign in with SSO
        <% end %>
      </p>
    <% end %>
  <% else %>
    <p>‚ùå No SSO providers configured</p>
  <% end %>
</div>

<%= link_to "Back to Login", new_user_session_path %>