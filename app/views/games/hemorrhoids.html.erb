<%= render 'shared/header' %>

<div class="hemorrhoids-container" data-controller="hemorrhoids">
  <!-- Professional Loading Screen -->
  <div id="loadingScreen" class="game-loading" data-hemorrhoids-target="loadingScreen">
    <div class="loading-content">
      <div class="loading-logo">
        <span class="loading-rocket">🚀</span>
        <div class="loading-title">HEMORRHOIDS</div>
      </div>
      <div class="loading-spinner"></div>
      <div class="loading-text">HEMORRHOIDS</div>
      <div class="loading-subtitle">Initializing Asteroid Defense System...</div>
    </div>
  </div>

  <h1 class="game-title">🚀 Hemorrhoids</h1>
  <p class="game-subtitle">Classic Asteroids Arcade Action!</p>
  
  <div id="gameContainer" class="game-container">
    <canvas id="gameCanvas" 
            class="game-canvas" 
            width="800" 
            height="600" 
            tabindex="0"
            data-hemorrhoids-target="canvas"
            data-action="click->hemorrhoids#focusGame"></canvas>
    
    <!-- Game UI Overlay -->
    <div id="ui">
      <div class="ui-panel score-panel">
        <div>SCORE: <span id="score">0</span></div>
      </div>
      <div class="ui-panel lives-panel">
        <div>SHIPS: <span id="lives">3</span></div>
      </div>
      <div class="ui-panel level-panel">
        <div>WAVE: <span id="level">1</span></div>
      </div>
      <div class="ui-panel asteroids-panel">
        <div>ROCKS: <span id="asteroids">0</span></div>
      </div>
      <div class="ui-panel debug-panel hidden" id="debug">
        <div>DEBUG INFO:</div>
        <div>Game loading...</div>
      </div>
      
    </div>
  </div>

  <!-- Game Over Screen - positioned below game -->
  <div id="gameOverScreen" class="game-over hidden">
    <h2>GAME OVER</h2>
    <p>Your Score: <span id="finalScore">0</span></p>
    <p>Wave Reached: <span id="finalLevel">1</span></p>
    <p>Press SPACE to restart</p>
  </div>
  
  <div id="gameControls" class="game-controls">
    <div id="gameInfo" class="game-info">
      <span class="score-item score-green">SCORE: <span id="scoreDisplay" data-hemorrhoids-target="score">000000</span></span>
      <span class="score-item score-cyan">SHIPS: <span id="livesDisplay" data-hemorrhoids-target="lives">3</span></span>
      <span class="score-item score-yellow">WAVE: <span id="levelDisplay" data-hemorrhoids-target="level">1</span></span>
      <span class="score-item score-red">ROCKS: <span id="asteroidsDisplay" data-hemorrhoids-target="asteroids">0</span></span>
    </div>
    
    <div id="startScreen" class="start-screen">
      <h2>HEMORRHOIDS</h2>
      <p>Destroy the asteroids before they destroy you!</p>
      <p>◄ ► Rotate Ship • ▲ Thrust • SPACE Fire • H Hyperspace</p>
      <p>Large asteroids split into smaller ones</p>
      <p>UFOs appear at higher waves for bonus points</p>
      <p>Press SPACE to start</p>
    </div>
    
    <button id="startButton" 
            class="game-button start-button" 
            data-hemorrhoids-target="startButton">
      Launch Ship
    </button>
  </div>
  
  <div id="gameOver" 
       class="game-over game-over-hidden" 
       data-hemorrhoids-target="gameOver">
    <div class="game-over-content">
      <h2>Mission Complete</h2>
      <div class="final-stats">
        <div class="stat-line">Final Score: <span id="finalScoreDisplay">0</span></div>
        <div class="stat-line">Wave Reached: <span id="finalLevelDisplay">0</span></div>
        <div class="stat-line">Asteroids Destroyed: <span id="finalAsteroidsDisplay">0</span></div>
      </div>
      <button class="game-button restart-button" data-action="click->hemorrhoids#restart">
        New Mission
      </button>
    </div>
  </div>
  
  <div class="back-link">
    <%= link_to "← Back to Arcade", arcade_path, class: "btn btn-secondary" %>
  </div>
</div>

<!-- Professional Accessibility Features -->
<div class="visually-hidden" role="status" aria-live="polite" id="gameStatus">
  Hemorrhoids initialized. Use arrow keys to rotate and thrust, space to fire, H for hyperspace.
</div>

<%= render 'shared/footer' %>
