<%= form_with model: [:admin, @terms_of_use], local: true, class: "admin-form" do |form| %>
  <% if @terms_of_use.errors.any? %>
    <div class="alert alert-danger">
      <h4><%= pluralize(@terms_of_use.errors.count, "error") %> prohibited this Terms of Use from being saved:</h4>
      <ul>
        <% @terms_of_use.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="admin-form-group">
    <%= form.label :title, class: "admin-form-label" %>
    <%= form.text_field :title, class: "admin-form-input", placeholder: "e.g., Terms of Use" %>
  </div>

  <div class="mb-20"></div>

  <div class="admin-form-group">
    <% if @terms_of_use.persisted? %>
      <label class="admin-form-label">Version</label>
      <div class="admin-form-input bg-readonly">
        Version <%= @terms_of_use.version %>
      </div>
    <% else %>
      <label class="admin-form-label">Version</label>
      <div class="admin-form-input bg-readonly">
        Version <%= (TermsOfUse.maximum(:version) || 0) + 1 %> (new version)
      </div>
    <% end %>
  </div>

  <div class="mb-20"></div>

  <div class="admin-form-group">
    <%= form.label :content, "Content (using simple markup)", class: "admin-form-label" %>
    <div class="markup-help">
      <p><strong>Simple Markup Guide:</strong></p>
      <ul>
        <li><code>## Heading</code> → Creates a main section with heading</li>
        <li><code>### Sub-heading</code> → Creates a sub-section</li>
        <li><code>- Bullet point</code> → Creates bulleted lists</li>
        <li><code>**Bold text**</code> → Makes text bold</li>
        <li><code>**Contact Info:**</code> → Special contact information block</li>
      </ul>
    </div>
    
    <%= form.text_area :content, 
        class: "admin-form-textarea markup-editor", 
        rows: 25,
        placeholder: 'Use simple markup to format your content. See the guide above for examples.',
        data: { "markup-editor-target": "editor" } %>
  </div>

  <div class="admin-form-actions mt-32">
    <% if @terms_of_use.persisted? %>
      <%= form.submit "Update Terms of Use", class: "admin-btn admin-btn-primary" %>
    <% else %>
      <%= form.submit "Create Version #{(TermsOfUse.maximum(:version) || 0) + 1}", class: "admin-btn admin-btn-primary" %>
    <% end %>
    <button type="button" id="preview-btn" class="admin-btn admin-btn-success" data-markup-editor-target="previewButton">Preview Full Page</button>
    <%= link_to "Cancel", admin_terms_of_uses_path, class: "admin-btn admin-btn-secondary" %>
  </div>
<% end %>


