<%= turbo_frame_tag "trigger-conditions-frame" do %>
  <% case trigger_type %>
  <% when 'application_status_changed' %>
    <div class="form-section">
      <h4>Application Status Changed Conditions</h4>
      
      <div class="form-group">
        <label class="form-label">From Status</label>
        <%= select_tag "email_workflow[trigger_conditions][from_status]", 
                       options_for_select([["Any status", ""]] + Application.statuses.map { |k,v| [k.humanize, k] }),
                       { class: "form-select" } %>
        <p class="form-help">Application must change FROM this status (optional)</p>
      </div>
      
      <div class="form-group">
        <label class="form-label">To Status</label>
        <%= select_tag "email_workflow[trigger_conditions][to_status]", 
                       options_for_select([["Any status", ""]] + Application.statuses.map { |k,v| [k.humanize, k] }),
                       { class: "form-select" } %>
        <p class="form-help">Application must change TO this status (optional)</p>
      </div>
    </div>

  <% when 'application_stuck_at_status' %>
    <div class="form-section">
      <h4>Application Stuck at Status Conditions</h4>
      
      <div class="form-group">
        <label class="form-label">Status</label>
        <%= select_tag "email_workflow[trigger_conditions][status]", 
                       options_for_select([["Select status", ""]] + Application.statuses.map { |k,v| [k.humanize, k] }),
                       { class: "form-select", required: true } %>
        <p class="form-help">Application has been stuck at this status</p>
      </div>
      
      <div class="form-group">
        <label class="form-label">Duration (days)</label>
        <%= number_field_tag "email_workflow[trigger_conditions][days]", nil, 
                            { class: "form-input", min: 1, placeholder: "e.g. 7" } %>
        <p class="form-help">Number of days application has been at this status</p>
      </div>
    </div>

  <% when 'contract_status_changed' %>
    <div class="form-section">
      <h4>Contract Status Changed Conditions</h4>
      
      <div class="form-group">
        <label class="form-label">From Status</label>
        <%= select_tag "email_workflow[trigger_conditions][from_status]", 
                       options_for_select([["Any status", ""]] + %w[draft active completed cancelled].map { |s| [s.humanize, s] }),
                       { class: "form-select" } %>
        <p class="form-help">Contract must change FROM this status (optional)</p>
      </div>
      
      <div class="form-group">
        <label class="form-label">To Status</label>
        <%= select_tag "email_workflow[trigger_conditions][to_status]", 
                       options_for_select([["Any status", ""]] + %w[draft active completed cancelled].map { |s| [s.humanize, s] }),
                       { class: "form-select" } %>
        <p class="form-help">Contract must change TO this status (optional)</p>
      </div>
    </div>

  <% when 'user_registered' %>
    <div class="form-section">
      <h4>User Registration Conditions</h4>
      
      <div class="form-group">
        <label class="form-label">Country of Residence</label>
        <%= select_tag "email_workflow[trigger_conditions][country]", 
                       options_for_select([["Any country", ""]] + %w[Australia Canada USA UK].map { |c| [c, c] }),
                       { class: "form-select" } %>
        <p class="form-help">Only trigger for users from this country (optional)</p>
      </div>
    </div>

  <% when 'time_delay' %>
    <div class="form-section">
      <h4>Time Delay Conditions</h4>
      
      <div class="form-group">
        <label class="form-label">Delay Amount</label>
        <%= number_field_tag "email_workflow[trigger_conditions][amount]", 1, 
                            { class: "form-input", min: 1 } %>
      </div>
      
      <div class="form-group">
        <label class="form-label">Delay Unit</label>
        <%= select_tag "email_workflow[trigger_conditions][unit]", 
                       options_for_select([["Minutes", "minutes"], ["Hours", "hours"], ["Days", "days"]]),
                       { class: "form-select" } %>
      </div>
    </div>

  <% when 'document_uploaded' %>
    <div class="form-section">
      <h4>Document Upload Conditions</h4>
      
      <div class="form-group">
        <label class="form-label">Document Type</label>
        <%= select_tag "email_workflow[trigger_conditions][document_type]", 
                       options_for_select([["Any document", ""]] + %w[identity income property].map { |t| [t.humanize, t] }),
                       { class: "form-select" } %>
        <p class="form-help">Only trigger for this document type (optional)</p>
      </div>
    </div>

  <% when 'inactivity' %>
    <div class="form-section">
      <h4>Inactivity Conditions</h4>
      
      <div class="form-group">
        <label class="form-label">Inactive Period (days)</label>
        <%= number_field_tag "email_workflow[trigger_conditions][days]", 30, 
                            { class: "form-input", min: 1 } %>
        <p class="form-help">User has been inactive for this many days</p>
      </div>
    </div>

  <% when 'contract_signed' %>
    <div class="form-section">
      <h4>Contract Signed Conditions</h4>
      
      <div class="form-group">
        <label class="form-label">Contract Type</label>
        <%= select_tag "email_workflow[trigger_conditions][contract_type]", 
                       options_for_select([["Any contract", ""]] + %w[standard premium business].map { |t| [t.humanize, t] }),
                       { class: "form-select" } %>
        <p class="form-help">Only trigger for this contract type (optional)</p>
      </div>
    </div>

  <% else %>
    <div class="trigger-conditions-placeholder">
      <p class="form-help">This trigger type doesn't require additional configuration.</p>
    </div>
  <% end %>
<% end %>